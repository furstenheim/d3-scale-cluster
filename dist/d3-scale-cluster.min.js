!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("d3scaleCluster",[],n):"object"==typeof exports?exports.d3scaleCluster=n():r.d3scaleCluster=n()}(this,function(){return function(r){function n(e){if(t[e])return t[e].exports;var o=t[e]={exports:{},id:e,loaded:!1};return r[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=r,n.c=t,n.p="",n(0)}([function(r,n,t){function e(){function r(){if(!(a.length<=2)){var r=o(t,Math.min(t.length,a.length));n=0!==r.length,u=[];for(var e=0;e<r.length;e++)u.push(r[e][0])}}var n=!1,t=[],a=[],u=[],i=function(r){if(n){for(var t=u.length-1;t>=0;t--)if(r>=u[t])return a[t];return a[0]}};return i.domain=function(){return arguments.length?(t=arguments[0],r(),i):t},i.range=function(){if(arguments.length){var n=arguments[0],t=n.length!==a.length;return a=n,t&&r(),i}return a},i.invertExtent=function(r){for(var n=NaN,t=NaN,e=0;e<a.length;e++)if(a[e]===r){n=u[e],t=e+1<a.length?u[e+1]:NaN;break}return[n,t]},i.clusters=function(){return u.slice(1)},i.export=function(){return{isReady:n,domain:t,range:a,breakpoints:u}},i.import=function(r){if(!r)throw new Error("Import requires parameters");return n=r.isReady,t=r.domain,a=r.range,u=r.breakpoints,i},i.copy=function(){return e().domain(t).range(a)},i}var o=t(1);"object"==typeof d3&&(d3.scaleCluster=e),r.exports=e},function(r,n){function t(r){return r.slice().sort(function(r,n){return r-n})}function e(r){for(var n,t=0,e=0;e<r.length;e++)0!==e&&r[e]===n||(n=r[e],t++);return t}function o(r,n){for(var t=[],e=0;e<r;e++){for(var o=[],a=0;a<n;a++)o.push(0);t.push(o)}return t}function a(r,n,t,e){var o;if(r>0){var a=(t[n]-t[r-1])/(n-r+1);o=e[n]-e[r-1]-(n-r+1)*a*a}else o=e[n]-t[n]*t[n]/(n+1);return o<0?0:o}function u(r,n,t,e,o,i,f){if(!(r>n)){var l=Math.floor((r+n)/2);e[t][l]=e[t-1][l-1],o[t][l]=l;var c=t;r>t&&(c=Math.max(c,o[t][r-1]||0)),c=Math.max(c,o[t-1][l]||0);var s=l-1;n<e.length-1&&(s=Math.min(s,o[t][n+1]||0));for(var h,p,g,v,d=s;d>=c&&(h=a(d,l,i,f),!(h+e[t-1][c-1]>=e[t][l]));--d)p=a(c,l,i,f),g=p+e[t-1][c-1],g<e[t][l]&&(e[t][l]=g,o[t][l]=c),c++,v=h+e[t-1][d-1],v<e[t][l]&&(e[t][l]=v,o[t][l]=d);u(r,l-1,t,e,o,i,f),u(l+1,n,t,e,o,i,f)}}function i(r,n,t){for(var e=n[0].length,o=new Array(e),i=new Array(e),f=r[Math.floor(e/2)],l=0;l<e;++l)0===l?(o[0]=r[0]-f,i[0]=(r[0]-f)*(r[0]-f)):(o[l]=o[l-1]+r[l]-f,i[l]=i[l-1]+(r[l]-f)*(r[l]-f)),n[0][l]=a(0,l,o,i),t[0][l]=0;for(var c,s=1;s<n.length;++s)c=s<n.length-1?s:e-1,u(c,e-1,s,n,t,o,i)}function f(r,n){if(n>r.length)throw new Error("Cannot generate more classes than there are data values");var a=r.length,u=t(r),f=e(u);if(1===f)return[u];n=Math.min(f,n);var l=o(n,a),c=o(n,a);i(u,l,c);for(var s=[],h=c[0].length-1,p=c.length-1;p>=0;p--){var g=c[p][h];s[p]=u.slice(g,h+1),p>0&&(h=g-1)}return s}r.exports=f}])});